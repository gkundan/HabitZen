<div class="log_container">
  <div class="entry-log">
    <h2>Add Entry</h2>
    <div class="entry-form">
      <form method="POST" action="/habit/<%= habit._id %>/log/create">
        <div>
          <label for="entry-date">Date:</label>
        </div>
        <div>
          <input type="date" id="entry-date" name="date" required />
        </div>
        <div>
          <label for="entry-action">Action:</label>
        </div>
        <div>
          <select id="entry-action" name="action" required>
            <option value="done">Done</option>
            <option value="notdone">Not Done</option>
            <option value="noaction">No Action</option>
          </select>
        </div>
        <button type="submit">Add Entry</button>
      </form>
    </div>
  </div>
  <div class="update-log">
    <% if (habit.log && habit.log.length) { %>
    <h2>Habit Log</h2>
    <div class="calendar-container">
      <div id="calendar"></div>
    </div>
    <% } else { %>
    <p>No log entries found for this habit.</p>
    <% } %>
  </div>
</div>

<script>
  // Initialize calendar with habit log entries
  const entries = <%= JSON.stringify(habit.log) %>;
  console.log(entries); // check if entries array contains data
  const calendarEl = document.getElementById('calendar');
  const calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: 'dayGridMonth',
    events: entries.map(entry => ({
      title: entry.action === "done" ? "âœ“" : (entry.action === "notdone" ? "X" : "-"),
      date: entry.date
    }))
  });
  calendar.render();
</script>
